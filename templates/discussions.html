<!-- discussions.html -->
{% extends "base.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block content_container %}

<div class="row">

    <div class="col-md-9">
		<h1>Discussions</h1>    					
	<!-- thread header -->			    
		<h3>{{ thread.subject }}
			<a href="{{ lesson.get_absolute_url }}">
				<small class="badge" style="float: right">{{ lesson }}</small>
			</a>
		</h3>
		<small>{{ thread.creator }}</small>
		<small style="float: right">{{ thread.modified|date:"M j Y" }}</small>
		    
	    <p>{{ thread.text }}</p>

	<!-- thread post form -->
	    <div class="well">
	        <form id="{{thread.id}}-postform" class="postform" action="{% url 'create_post'%}" method="post" data-reply_target="{{thread.id}}-replies">{% csrf_token %}
	            {{ postform|crispy }}
	            <p><input id="post_submit_btn" type="submit" class="btn btn-default" value="Add Post"/></p>
	        </form>
	    </div>
	        
	<!-- thread replies -->
	    <dl id="{{thread.id}}-replies" class="reply-block">		    
	    {% for j in replies  %}
		    <div id="post_{{j.id}}" class="well" style="margin-left: 30px">
		    	<dt>
		    		{{ j.subject }}
		    		<small>{{ j.creator }}</small>
		    		<small style="float: right">{{ j.modified|date:"M j Y" }}</small>
		    		
		    	</dt>
		    	<dd>{{ j.text }}</dd>
		    </div>
	    {% endfor %}
		</dl>

	</div>	
    
    <div class="col-md-3">
    	<h1>Threads</h1>
    	<div class="row">
			<div class="col-md-12 button-group">
			{% for i in thread_list  %}
				<a href="{% url 'discussion_select' i.slug %}" class="menu_btn btn {% if i.id == thread.id %}active{% endif %}">{{i.subject}}</a>
			{% endfor %}
				<a href="{% url 'discussion' %}" class="menu_btn btn"> All </a>
			</div>	
		</div>
    </div>

</div>

{% endblock content_container %}

 
{% block js_include %} <script src="{% static 'js/discussions.js' %}"></script>{% endblock js_include %}

